{% extends "base.html" %}

{% block title %}휴가 관리{% endblock %}
{% block page_title %}휴가 관리{% endblock %}
{% block page_subtitle %}휴가 사용 등록 및 잔여량을 관리합니다{% endblock %}

{% block content %}
<div class="card">
    <div class="badge">휴가 사용 등록</div>
    <form action="/admin/leaves/usage" method="post">
        <div class="grid">
            <div>
                <label for="leave_emp_id">직원 ID</label>
                <input id="leave_emp_id" name="employee_id" required>
            </div>
            <div>
                <label for="leave_days">사용 일수</label>
                <input id="leave_days" name="days" type="number" step="0.5" required>
            </div>
        </div>
        <button type="submit">등록</button>
    </form>
</div>

<div class="card">
    <div class="badge">휴가 정보 수정</div>
    <form action="/admin/leaves/update" method="post">
        <div class="grid">
            <div>
                <label for="leave_id">휴가 ID</label>
                <input id="leave_id" name="leave_id" required>
            </div>
            <div>
                <label for="leave_employee_id">직원 ID</label>
                <input id="leave_employee_id" name="employee_id" required>
            </div>
            <div>
                <label for="leave_year">연도</label>
                <input id="leave_year" name="year" required>
            </div>
            <div>
                <label for="leave_total">총량</label>
                <input id="leave_total" name="total" type="number" step="0.5" required>
            </div>
            <div>
                <label for="leave_used">사용</label>
                <input id="leave_used" name="used" type="number" step="0.5" required>
            </div>
            <div>
                <label for="leave_remaining">잔여</label>
                <input id="leave_remaining" name="remaining" type="number" step="0.5" required>
            </div>
        </div>
        <button type="submit" class="secondary">수정</button>
    </form>
</div>

<div class="card">
    <div class="badge">휴가 현황 검색</div>
    <form action="/admin/leaves" method="get" style="display: flex; gap: 1rem; align-items: flex-end;">
        <div style="flex: 1;">
            <label for="search_employee_name">직원 이름</label>
            <input id="search_employee_name" name="employee_name" value="{{ search_employee_name }}" placeholder="직원 이름 검색">
        </div>
        <button type="submit" class="secondary" style="margin-bottom: var(--spacing);">검색</button>
    </form>
</div>

<div class="card">
    <div class="badge">휴가 잔여 현황</div>
    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>직원</th>
                    <th>연도</th>
                    <th>총량</th>
                    <th>사용</th>
                    <th>잔여</th>
                </tr>
            </thead>
            <tbody>
                {% for l in leaves %}
                <tr>
                    <td>{{ l.id }}</td>
                    <td>{{ l.name }} ({{ l.employee_id }})</td>
                    <td>{{ l.year }}</td>
                    <td>{{ l.total }}</td>
                    <td>{{ l.used }}</td>
                    <td>{{ l.remaining }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
