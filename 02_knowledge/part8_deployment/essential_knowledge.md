# PART 8. 배포와 운영

## 1. 📌 탄생 배경 (Background)
- **로컬호스트의 탈출**: `localhost:8000`에서만 돌아가는 서비스는 나 혼자밖에 못 씀. 팀원들이 쓰려면 서버에 배포해야 함.
- **안정성 이슈**: 개발 중엔 에러 나면 끄고 다시 켜면 되지만, 운영 환경에선 **"죽지 않는 서비스"**가 되어야 함.

## 2. 🔑 개념 (Concept)
- **Docker**: 내 컴퓨터 환경(OS, 라이브러리)을 그대로 컨테이너에 담아 어느 서버에서든 똑같이 실행되게 하는 기술.
- **Docker Compose**: 여러 컨테이너(API서버, DB, VectorDB)를 한 번에 실행하고 관리하는 도구.
- **Nginx**: 사용자의 요청을 받아서 백엔드 서버로 전달해주는 문지기(Reverse Proxy). 보안(HTTPS)과 부하 분산을 담당.

## 3. ⚙️ 역할 (Role)
- **서비스화**: 24시간 365일 중단 없이 서비스를 제공하기 위한 환경 구축.
- **모니터링**: 누가 언제 썼는지, 에러는 없는지, LLM이 이상한 답을 하지는 않는지 감시.

## 4. 💡 도입 이유 (Reason)
- **환경 일치**: 개발에선 됐는데 운영에선 안 되는("It works on my machine") 문제를 해결.
- **확장성**: 사용자가 늘어나면 컨테이너 개수만 늘려서 대응 가능.

## 5. ⚖️ 장단점 (Pros & Cons)
| 구분 | 내용 |
| :--- | :--- |
| **장점** | - **이식성**: AWS, Azure, 사내 서버 어디든 쉽게 옮길 수 있음.<br>- **격리성**: 하나의 서비스가 죽어도 다른 서비스에 영향을 덜 줌. |
| **단점** | - **학습 비용**: Dockerfile, YAML 설정, 네트워크 구조 등을 배워야 함.<br>- **리소스 오버헤드**: 가상화 기술이므로 베어메탈(쌩 컴퓨터)보다는 성능이 약간 떨어질 수 있음. |

## 6. 🆚 차별점 (Differences)
- **vs 로컬 실행**:
  - 로컬 `python main.py`는 터미널 끄면 꺼지지만, Docker는 데몬 형태로 백그라운드에서 계속 돔.
- **vs Serverless (Lambda)**:
  - LLM은 메모리를 많이 먹고 실행 시간이 길어서(Timeout 이슈), 서버리스보다는 컨테이너 방식(ECS, K8s)이 유리함.

## 7. 🔗 관련 기술 (Related Tech)
- **FastAPI Uvicorn Workers**: 파이썬은 기본적으로 싱글 코어만 쓰지만, 워커를 늘려 멀티 코어를 활용하게 설정 가능.
- **Prometheus / Grafana**: 서버 상태와 매트릭(CPU, 요청 수)을 시각화하는 모니터링 도구.
- **Sentry**: 에러 발생 시 즉시 알림을 보내주는 버그 추적  시스템.
