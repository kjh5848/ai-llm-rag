# PART 4. RAG로 Q&A 엔진 만들기

## 1. 탄생 배경 (Background)
- **지식의 연결**: VectorDB에 저장된 지식과 LLM의 언어 능력을 실제로 연결하는 **"실행 단계"**.
- **할루시네이션 제어**: 단순히 모델에게 물어보면 거짓말을 하므로, **"검색된 문서만 보고 답해"**라고 강제할 필요가 있음.

## 2. 개념 (Concept)
- **Retriever (검색기)**: VectorDB에서 사용자의 질문과 관련된 문서를 가져오는 모듈.
- **Augmentation (증강)**: 검색된 문서를 프롬프트(Prompt)에 끼워 넣는 행위.
- **Generation (생성)**: 증강된 프롬프트를 보고 LLM이 최종 답변을 만드는 과정.

## 3. 역할 (Role)
- **질의응답 시스템의 두뇌**: 사용자의 질문을 이해하고, 근거를 찾고, 말을 만드는 전체 프로세스를 담당.
- **출처 추적**: 답변이 어느 문서의 몇 페이지에서 나왔는지 사용자에게 알려주는 역할.

## 4. 도입 이유 (Reason)
- **신뢰성 확보**: 사용자는 AI의 답변만 보고는 믿을 수 없음. **"출처(Source)"**가 함께 제시되어야 업무에 쓸 수 있음.
- **답변 스타일 조정**: 프롬프트 엔지니어링을 통해 "친절하게", "간결하게", "JSON 포맷으로" 등 답변 형식을 제어 가능.

## 5. 장단점 (Pros & Cons)
| 구분 | 내용 |
| :--- | :--- |
| **장점** | - **정확도**: 근거 기반 답변으로 신뢰도가 높음.<br>- **유연성**: 프롬프트만 바꾸면 챗봇의 페르소나(Persona)를 쉽게 변경 가능. |
| **단점** | - **프롬프트 민감성**: 프롬프트를 조금만 잘못 짜도 답변 품질이 크게 달라짐.<br>- **Context Length**: 검색된 문서가 너무 많으면 프롬프트 길이를 초과하여 에러 발생 가능. |

## 6. 차별점 (Differences)
- **vs 검색 엔진 (Google)**: 
  - 검색 엔진은 "문서 링크"를 주지만, RAG 엔진은 "읽고 요약된 답변"을 줌.
- **vs 챗봇 (Rule-based)**:
  - 기존 챗봇은 정해진 시나리오만 답하지만, RAG는 데이터에 있는 모든 내용에 대해 유연하게 답함.

## 7. 관련 기술 (Related Tech)
- **RetrieveQA Chain**: LangChain에서 제공하는 RAG 표준 파이프라인.
- **Prompt Template**: {context}와 {question}을 받아 LLM에게 보낼 최종 명령어를 만드는 틀.
- **Streaming Response**: 답변을 한 글자씩 실시간으로 보여주어 체감 속도를 높이는 기술.
